much better data structure using classes, should improve manageability of code

need to use DEBUG flag to turn on/off debug messages